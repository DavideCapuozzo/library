(()=>{"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}var e=document.getElementById("form"),n=document.getElementById("cerca"),o=document.getElementById("container"),r=function(t,e,n,o,r){var i=document.createElement(t);return e&&""!==e&&i.classList.add(e),n&&i.setAttribute("id",n),o&&(i.innerHTML=o),r&&i.addEventListener("click",r),i},i=function(t,e,n,o){var r=document.createElement("img");return t&&""!==t.trim()&&(r.src=t.trim()),e&&(r.alt=e),n&&""!==n.trim()&&r.classList.add(n.trim()),o&&r.addEventListener("click",o),r};e.addEventListener("submit",(function(e){o.style.paddingTop="100px",e.preventDefault(),console.log("#### JSON API ####");var c="https://openlibrary.org/subjects/"+n.value.toLowerCase()+".json";o.innerHTML="",fetch(c).then((function(t){return t.json()})).then((function(e){for(var n=e.works,c=function(){var e=n[l].title,c=n[l].authors[0].name,s="https://openlibrary.org"+n[l].key+".json",a=n[l].availability,d=r("div","col-xxl-3","card","",(function(){return function(e,n){var o=n.querySelector(".description-book");o?o.remove():fetch(e).then((function(t){return t.json()})).then((function(e){var o=e.description;console.log(o),console.log(t(o));var i=r("p","description-book");i.innerHTML=o,"string"==typeof o?i.innerHTML=o:"object"===t(o)?i.innerHTML=o.value:i.innerHTML="DESCRIZIONE NON DISPONIBILE",n.appendChild(i)})).catch((function(t){return console.error("Errore durante il fetch:",t)}))}(s,d)}));if(o.appendChild(d),d.classList.add("col-lg-4"),d.classList.add("col-md-6"),a){var u=a.isbn;if(u){var p=i("https://covers.openlibrary.org/b/isbn/"+u+"-M.jpg","","imgCover");d.appendChild(p)}else{var m=i("https://www.shutterstock.com/shutterstock/photos/2059817444/display_1500/stock-vector-no-image-available-photo-coming-soon-illustration-vector-2059817444.jpg","","imgCover");d.appendChild(m)}}else{var f=i("https://t4.ftcdn.net/jpg/04/99/93/31/360_F_499933117_ZAUBfv3P1HEOsZDrnkbNCt4jc3AodArl.jpg","","imgCover");d.appendChild(f)}var h=r("h5","title-book");d.appendChild(h);var v,b=r("p","authors-book");d.appendChild(b),h.innerHTML=e,b.innerHTML=c,(v=document.querySelector(".bannerLibri"))&&v.scrollIntoView({behavior:"smooth"}),console.log("----- TITOLO ---- \n",n[l].title),console.log("----- AUTORE ---- \n",n[l].authors[0].name),console.log("----- DESCRIZIONE ---- \n",s)},l=0;l<n.length;l++)c()})).catch((function(t){return console.error("Errore durante il fetch:",t)}))}))})();