(()=>{"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}var t=document.getElementById("form"),n=document.getElementById("cerca"),o=document.getElementById("container"),r=function(e,t,n,o,r){var i=document.createElement(e);return t&&""!==t&&i.classList.add(t),n&&i.setAttribute("id",n),o&&(i.innerHTML=o),r&&i.addEventListener("click",r),i},i=function(e,t,n,o){var r=document.createElement("img");return e&&""!==e.trim()&&(r.src=e.trim()),t&&(r.alt=t),n&&""!==n.trim()&&r.classList.add(n.trim()),o&&r.addEventListener("click",o),r};t.addEventListener("submit",(function(t){var l;o.style.paddingTop="100px",(l=document.querySelector(".bannerLibri"))&&l.scrollIntoView({behavior:"smooth"}),document.getElementById("loader").style.display="block",t.preventDefault(),console.log("#### JSON API ####");var c=n.value.toLowerCase(),a="https://openlibrary.org/subjects/"+(c=c.replace(/\s/g,"_"))+".json";o.innerHTML="",fetch(a).then((function(e){return e.json()})).then((function(t){var n=t.works;if(0==n){document.getElementById("loader").style.display="none";var l=r("h3","allert");o.appendChild(l),l.innerHTML="LA RICERCA NON HA RESTITUITO NESSUN RISULTATO"}else for(var c=function(){var t=n[a].title,l=n[a].authors[0].name,c="https://openlibrary.org"+n[a].key+".json",s=n[a].availability,d=r("div","col-xxl-3","card","",(function(){return function(t,n){var o=n.querySelector(".description-book");o?o.remove():fetch(t).then((function(e){return e.json()})).then((function(t){var o=t.description;console.log(o),console.log(e(o));var i=r("p","description-book");i.innerHTML=o,"string"==typeof o?i.innerHTML=o:"object"===e(o)?i.innerHTML=o.value:i.innerHTML="DESCRIZIONE NON DISPONIBILE",n.appendChild(i)})).catch((function(e){return console.error("Errore durante il fetch:",e)}))}(c,d)}));if(o.appendChild(d),d.classList.add("col-lg-4"),d.classList.add("col-md-6"),s){var u=s.isbn;if(u){var p=i("https://covers.openlibrary.org/b/isbn/"+u+"-M.jpg","","imgCover");d.appendChild(p)}else{var m=i("https://www.shutterstock.com/shutterstock/photos/2059817444/display_1500/stock-vector-no-image-available-photo-coming-soon-illustration-vector-2059817444.jpg","","imgCover");d.appendChild(m)}}else{var v=i("https://t4.ftcdn.net/jpg/04/99/93/31/360_F_499933117_ZAUBfv3P1HEOsZDrnkbNCt4jc3AodArl.jpg","","imgCover");d.appendChild(v)}document.getElementById("loader").style.display="none";var f=r("h5","title-book");d.appendChild(f);var h=r("p","authors-book");d.appendChild(h),f.innerHTML=t,h.innerHTML=l,console.log("----- TITOLO ---- \n",n[a].title),console.log("----- AUTORE ---- \n",n[a].authors[0].name),console.log("----- DESCRIZIONE ---- \n",c)},a=0;a<n.length;a++)c()})).catch((function(e){return console.error("Errore durante il fetch:",e)}))}))})();